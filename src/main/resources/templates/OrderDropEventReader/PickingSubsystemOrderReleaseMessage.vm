<PickingSubSystemOrderReleaseMessage xmlns="http://www.xmlns.walmartstores.com/SuppyChain/FulfillmentManagement/GlobalIntegeratedFulfillment/Picking/PickingSubSystemOrderReleaseMessage/1.0/" xmlns:hdr="http://www.xmlns.walmartstores.com/Header/datatypes/MessageHeader/1.4/">
  <hdr:MessageHeader>
    <hdr:SubId>SUB-EIC-UPDPICK-V1</hdr:SubId>
    <hdr:CnsmrId>CON-NODE-UPDPICK-V1</hdr:CnsmrId>
    <hdr:SrvcNm>UpdateFulfillmentPicking.subSystemOrderRelease</hdr:SrvcNm>
    <hdr:TranId>$DOMAIN_ENTITY.order.fulfillmentOrder.orderNbr</hdr:TranId>
    <hdr:Version>1.0</hdr:Version>
  </hdr:MessageHeader>
  <MessageBody>
    <RoutingInfo>
      <SourceNode>
        <location>
          <countryCode>$DOMAIN_ENTITY.routingInfo.sourceNode.location.countryCode</countryCode>
        </location>
        <nodeID>$DOMAIN_ENTITY.routingInfo.sourceNode.nodeID</nodeID>
      </SourceNode>
      <DestinationNode>
        <location>
          <countryCode>$DOMAIN_ENTITY.routingInfo.destinationNode.location.countryCode</countryCode>
        </location>
        <nodeID>$DOMAIN_ENTITY.routingInfo.destinationNode.nodeID</nodeID>
        <cNodeID>$DOMAIN_ENTITY.routingInfo.destinationNode.cNodeID</cNodeID>
      </DestinationNode>
    </RoutingInfo>
    <Order>
      <node>
        <nodeId>$DOMAIN_ENTITY.order.node.nodeId</nodeId>
        <countryCode>$DOMAIN_ENTITY.order.node.countryCode</countryCode>
      </node>
      <fulfillmentOrder>
        <orderNbr>$DOMAIN_ENTITY.order.fulfillmentOrder.orderNbr</orderNbr>
        <orderPriority>
          <code>1</code>
          <description>Grocery Pickup Default</description>
        </orderPriority>
        <type code="6" name="$DOMAIN_ENTITY.order.fulfillmentOrder.type.name"/>
        <destinationBusinessUnit destBannerName="Walmart Grocery" destDivisonNumber="1"/>
        <pickDueTime>$tzCustomizer.toTimeZone($DOMAIN_ENTITY.routingInfo.sourceNode.location.timezone, $DOMAIN_ENTITY.order.fulfillmentOrder.pickDueTime)</pickDueTime>
        <expectedOrderPickupTime>$tzCustomizer.toTimeZone($DOMAIN_ENTITY.routingInfo.sourceNode.location.timezone, $DOMAIN_ENTITY.order.fulfillmentOrder.expectedOrderPickupTime)</expectedOrderPickupTime>
        <earliestPickTime>$tzCustomizer.toTimeZone($DOMAIN_ENTITY.routingInfo.sourceNode.location.timezone, $DOMAIN_ENTITY.order.fulfillmentOrder.earliestPickTime)</earliestPickTime>
        <orderSequenceNumber>$DOMAIN_ENTITY.order.fulfillmentOrder.orderSequenceNumber</orderSequenceNumber>
        <loadGroupNumber>$DOMAIN_ENTITY.order.fulfillmentOrder.loadGroupNumber</loadGroupNumber>
        <carrierBagAllowed>$DOMAIN_ENTITY.order.fulfillmentOrder.carrierBagAllowed</carrierBagAllowed>
        <recordCarrierBagCount>$DOMAIN_ENTITY.order.fulfillmentOrder.recordCarrierBagCount</recordCarrierBagCount>

        <lines>
            #foreach($line in $DOMAIN_ENTITY.order.fulfillmentOrder.lines)
                <line>
                    <lineNbr>$line.lineNbr</lineNbr>
                    <upc>$line.upc</upc>
                    <qty>$line.qty</qty>
                    <weight>$line.weight</weight>
                    <pickByType>$line.pickByType</pickByType>
                    <substitutionAllowed>$line.substitutionAllowed</substitutionAllowed>
                    <itemNbr>$line.itemNbr</itemNbr>
                    <uom>$line.itemNbr</uom>
                    <crossRefs>
                        #foreach($crossRef in $line.crossRefs)
                            <crossRef>
                                <upc>$crossRef.upc</upc>
                                <itemNbr>$crossRef.itemNbr</itemNbr>
                            </crossRef>
                        #end
                    </crossRefs>
                </line>
            #end
        </lines>
      </fulfillmentOrder>
    </Order>
  </MessageBody>
</PickingSubSystemOrderReleaseMessage>
